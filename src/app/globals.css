@import "tailwindcss";
@import "../styles/themes/themes.css";

@custom-variant dark (&:is(.dark *));

@theme {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-emerald-burnt: var(--emerald-burnt);
  --color-cyan-glowing: var(--cyan-glowing);
  --color-glass: var(--glass-bg);
  --color-glass-border: var(--glass-border);
}

:root {
  --background: #FFFFFF;
  --foreground: #1F2937;
  --emerald-burnt: #059669;
  --cyan-glowing: #0891b2;
  --glass-bg: rgba(255, 255, 255, 0.7);
  --glass-border: rgba(0, 0, 0, 0.08);
}

.dark {
  --background: #09090b;
  /* Deep slate black */
  --foreground: #F5F6F8;
  --emerald-burnt: #23865c;
  --cyan-glowing: #00E5FF;
  --glass-bg: rgba(20, 25, 30, 0.4);
  --glass-border: rgba(255, 255, 255, 0.05);
}

body {
  background-color: var(--background);
  color: var(--foreground);
}

@utility glass {
  background: var(--glass-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid var(--glass-border);
}

/* ── Grain overlay ─────────────────────────────────────────────────────────── */
/* Usage: add class "grain" to a fixed/absolute element overlaid on desktop    */
@utility grain {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 9990;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-repeat: repeat;
  background-size: 128px 128px;
  opacity: 0.028;
  mix-blend-mode: overlay;
}

/* ── Custom scrollbar ──────────────────────────────────────────────────────── */
.custom-scrollbar::-webkit-scrollbar { width: 4px; height: 4px; }
.custom-scrollbar::-webkit-scrollbar-track { background: transparent; }
.custom-scrollbar::-webkit-scrollbar-thumb { background: var(--glass-border); border-radius: 999px; }

.custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.15); }

/* ── Highlight.js theme switching ──────────────────────────────────────────── */
/* Light mode: use atom-one-light, override dark theme if present */
@media (prefers-color-scheme: light) {
  pre code.hljs {
    background: #fafafa;
    color: #383a42;
  }
}

/* Dark mode: use atom-one-dark */  
@media (prefers-color-scheme: dark) {
  pre code.hljs {
    background: #282c34;
    color: #abb2bf;
  }
}

/* Respect .dark class for next-themes */
.dark pre code.hljs {
  background: #282c34 !important;
  color: #abb2bf;
}

:not(.dark) pre code.hljs {
  background: #fafafa !important;
  color: #383a42;
}

/* Import highlight.js themes globally and scope via .dark / :not(.dark) overrides */
@import "highlight.js/styles/atom-one-light.css";
@import "highlight.js/styles/atom-one-dark.css";

/* Force hljs base colors to match app theme (important to override component imports) */
.dark .hljs,
.dark pre code.hljs {
  background: #282c34 !important;
  color: #abb2bf !important;
}

:not(.dark) .hljs,
:not(.dark) pre code.hljs {
  background: #fafafa !important;
  color: #383a42 !important;
}

/* Force token colors per theme to avoid conflicting imported hljs styles */
.dark .hljs .hljs-comment,
.dark .hljs .hljs-quote { color: #5c6370 !important; }
.dark .hljs .hljs-keyword,
.dark .hljs .hljs-selector-tag,
.dark .hljs .hljs-subst { color: #c678dd !important; }
.dark .hljs .hljs-number,
.dark .hljs .hljs-literal,
.dark .hljs .hljs-built_in,
.dark .hljs .hljs-builtin-name,
.dark .hljs .hljs-meta { color: #d19a66 !important; }
.dark .hljs .hljs-string,
.dark .hljs .hljs-doctag { color: #98c379 !important; }
.dark .hljs .hljs-title,
.dark .hljs .hljs-section,
.dark .hljs .hljs-function { color: #61afef !important; }
.dark .hljs .hljs-variable,
.dark .hljs .hljs-attr,
.dark .hljs .hljs-attribute { color: #e06c75 !important; }

:not(.dark) .hljs .hljs-comment,
:not(.dark) .hljs .hljs-quote { color: #7d8799 !important; }
:not(.dark) .hljs .hljs-keyword,
:not(.dark) .hljs .hljs-selector-tag,
:not(.dark) .hljs .hljs-subst { color: #a626a4 !important; }
:not(.dark) .hljs .hljs-number,
:not(.dark) .hljs .hljs-literal,
:not(.dark) .hljs .hljs-built_in,
:not(.dark) .hljs .hljs-builtin-name,
:not(.dark) .hljs .hljs-meta { color: #c18401 !important; }
:not(.dark) .hljs .hljs-string,
:not(.dark) .hljs .hljs-doctag { color: #50a14f !important; }
:not(.dark) .hljs .hljs-title,
:not(.dark) .hljs .hljs-section,
:not(.dark) .hljs .hljs-function { color: #4078f2 !important; }
:not(.dark) .hljs .hljs-variable,
:not(.dark) .hljs .hljs-attr,
:not(.dark) .hljs .hljs-attribute { color: #e45649 !important; }
/* ── Scrollbar hide ────────────────────────────────────────────────────────── */
.scrollbar-none { scrollbar-width: none; }
.scrollbar-none::-webkit-scrollbar { display: none; }